{{- define "post_preview" -}}
    <p style="flex:6">
        {{ if in .Site.Params.onlyHeadings .Type -}}
            {{- range .Fragments.Headings -}}
                {{- with .Title -}}
                {{- . -}}<br />
                {{- end -}}
                {{- range .Headings -}}
                    {{- with .Title -}}
                    {{- . -}}<br />
                    {{- end -}}
                {{- end -}}
            {{- end -}}
        {{- else -}}
            {{- .Summary -}}
        {{- end -}} 
    </p>
{{- end -}}

<article class="rounded m-2 py-2 px-3 shadow" style="background-color: var(--bs-body-bg);">
    <h1>
        {{- $type := path.BaseName .CurrentSection.Path -}}
        {{- with .Site.Params.sectionIcons -}}
            {{- with (index . $type) -}}
                {{- partial "svg.html" . -}}
            {{- end -}}
        {{- end -}}

        {{- .Title -}}</h1>
    <span class="badge text-bg-secondary mb-2" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Last Modified">
        {{ partial "svg.html" "icons/outline/calendar-month.svg" }}

        {{time.AsTime .Lastmod | time.Format "02.01.2006" }}
    </span>
    <div class="d-none d-xl-flex flex-column">
        {{ template "post_preview" . }}
        {{ if .RenderString .Content }}
            <a class="btn btn-primary post-button mb-2 align-self-end" role="button" href="{{.RelPermalink}}">{{ T "theme.toPostLabel" }}</a>
        {{ end }}
    </div>

    <div class="d-flex d-xl-none flex-column">
        {{ template "post_preview" . }}
        {{ if .RenderString .Content }}
        <a class="btn btn-primary post-button mb-2" role="button" href="{{.RelPermalink}}">{{ T "theme.toPostLabel" }}</a>
        {{ end }}
    </div>
</article>
